---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro';
import { getTranslations } from '@/utils/i18n';
import { getRecentPosts } from '@/utils/blog';
import { generateFAQSchema, generateWebSiteSchema } from '@/utils/seo';
import type { Locale } from '@/i18n/config';

const locale: Locale = 'pt';
const t = await getTranslations(locale, 'common');
const tHome = await getTranslations(locale, 'home');
const recentPosts = await getRecentPosts(5, locale);

const seo = {
  title: 'Sapiens IT - Engineering Insights & Architecture',
  description: 'Independent engineers sharing deep insights on software architecture, scalability, and engineering culture. Sapiens IT helps teams build better systems through clarity and discipline.',
  image: '/images/og-home.jpg'
};
---

<BaseLayout seo={seo} locale={locale} path="/">
  <!-- Schema.org JSON-LD -->
  <script type="application/ld+json" set:html={JSON.stringify(generateWebSiteSchema())} />
  <script type="application/ld+json" set:html={JSON.stringify(generateFAQSchema())} />
  
  <Header locale={locale} currentPath="/" />
  
  <!-- Hero Section -->
  <section class="bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 py-20 pt-32">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <h1 class="text-4xl md:text-6xl font-bold text-gray-900 dark:text-white mb-6">
          {tHome.hero.title}
        </h1>
        <p class="text-xl text-gray-600 dark:text-gray-300 mb-8 max-w-3xl mx-auto">
          {tHome.hero.subtitle}
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a 
            href="/contact" 
            class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg text-lg font-medium transition-colors"
          >
            {tHome.hero.cta}
          </a>
          <a 
            href="/services" 
            class="border border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white px-8 py-3 rounded-lg text-lg font-medium transition-colors"
          >
            {t.buttons.learnMore}
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Services Section -->
  <section class="py-20 bg-white dark:bg-gray-900">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4">
          {tHome.services.title}
        </h2>
        <p class="text-xl text-gray-600 dark:text-gray-300">
          {tHome.services.subtitle}
        </p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {tHome.services.items.map((service: any, index: number) => (
          <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow">
            <div class="w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center mb-4">
              <svg class="w-6 h-6 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </div>
            <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">
              {service.title}
            </h3>
            <p class="text-gray-600 dark:text-gray-300">
              {service.description}
            </p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Trainings Section -->
  <section class="py-20 bg-gray-50 dark:bg-gray-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4">
          {tHome.trainings.title}
        </h2>
        <p class="text-xl text-gray-600 dark:text-gray-300 mb-8">
          {tHome.trainings.subtitle}
        </p>
        <p class="text-lg text-gray-600 dark:text-gray-300 max-w-3xl mx-auto">
          {tHome.trainings.description}
        </p>
      </div>
      
      <div class="text-center">
        <a 
          href="/trainings" 
          class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg text-lg font-medium transition-colors"
        >
          {tHome.trainings.cta}
        </a>
      </div>
    </div>
  </section>

  <!-- Blog Section -->
  <section class="py-20 bg-gray-50 dark:bg-gray-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4">
          {tHome.blog.title}
        </h2>
        <p class="text-xl text-gray-600 dark:text-gray-300">
          {tHome.blog.subtitle}
        </p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {recentPosts.map((post) => (
          <article class="bg-white dark:bg-gray-900 rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow">
            <a href={`/blog/${post.slug}`}>
              <img 
                src={post.cover} 
                alt={post.title}
                class="w-full h-48 object-cover"
                loading="lazy"
              />
            </a>
            <div class="p-6">
              <div class="flex items-center text-sm text-gray-500 dark:text-gray-400 mb-2">
                <span>{post.category}</span>
                <span class="mx-2">•</span>
                <span>{post.date.toLocaleDateString('pt-BR')}</span>
              </div>
              <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">
                {post.title}
              </h3>
              <p class="text-gray-600 dark:text-gray-300 mb-4">
                {post.description}
              </p>
              <a 
                href={`/blog/${post.slug}`}
                class="text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium"
              >
                {t.buttons.readMore} →
              </a>
            </div>
          </article>
        ))}
      </div>
      
      <div class="text-center mt-12">
        <a 
          href="/blog" 
          class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg text-lg font-medium transition-colors"
        >
          {tHome.blog.viewAll}
        </a>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-20 bg-blue-600">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-3xl md:text-4xl font-bold text-white mb-4">
        {tHome.cta.title}
      </h2>
      <p class="text-xl text-blue-100 mb-8 max-w-3xl mx-auto">
        {tHome.cta.subtitle}
      </p>
      <a 
        href="/contact" 
        class="bg-white hover:bg-gray-100 text-blue-600 px-8 py-3 rounded-lg text-lg font-medium transition-colors"
      >
        {tHome.cta.button}
      </a>
    </div>
  </section>

  <Footer locale={locale} />
</BaseLayout>
